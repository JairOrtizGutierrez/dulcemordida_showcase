"use strict";(self.webpackChunkshowcase=self.webpackChunkshowcase||[]).push([[60],{1060:(Qe,L,l)=>{l.r(L),l.d(L,{SalesModule:()=>ke});var p=l(6814),W=l(3830),V=l(5231),c=l(4808),g=l(6587),e=l(5879),h=l(6472),f=l(1599),M=l(1096),N=l(3144),J=l(7991),q=l(9662),A=l(3867),I=l(8871),F=l(4741),U=l(1698),w=l(215),E=l(6564),O=l(7775);function j(n,r){1&n&&e._UZ(0,"img",32)}function R(n,r){1&n&&e._UZ(0,"img",33)}const z=function(){return["Ventas","Lista de ventas"]};let X=(()=>{var n;class r extends g.H{constructor(o){super(),this.ngZone=o,this.limit=10,this.entrypoint="/ventas",this.extraEntrypoint=`/${(0,p.p6)(new Date,"yyyy-MM-dd","en")}/${(0,p.p6)(new Date,"yyyy-MM-dd","en")}`,this.identifier="id",this.hasEditButton=!0,this.hasDeleteButton=!0,this.fieldActionName="Acci\xf3n",this.keys=[{property:["producto","nombre"],type:"TEXT",header:"Nombre"},{property:["monto"],type:"MONEY",header:"Monto"},{property:["cantidad"],type:"TEXT",header:"Cantidad"},{property:["ventaTipo","nombre"],type:"TEXT",header:"Tipo"},{property:["fechaVenta"],type:"DATE",header:"Fecha"},{property:["imagen"],type:"IMAGE",header:"Imagen"}],this.selectOptions=[10,15,20],this.preposition="de",this.editPageUrl="/admin/sales/list/edit",this.addPageUrl="/admin/sales/add",this.deleteModalHeaderText="Borrar venta",this.deleteModalBodyText="\xbfEst\xe1s seguro que deseas borrar la venta?",this.deleteModalFooterButtonCloseText="Cerrar",this.deleteModalFooterButtonExecuteText="Borrar",this.errorModalHeaderText="Error",this.errorModalBodyText="Ocurri\xf3 un error, int\xe9ntelo de nuevo",this.errorModalFooterButtonCloseText="Cerrar",this.xlsxFileName="lista-ventas",this.xlsxPrimaryColor="#432818",this.xlsxSecondaryColor="#F7EFE2",this.pdfFileName="lista-ventas",this.hasImage=!0,this.imageUrl="https://i.imgur.com/5ZrMWpD.jpg",this.imageWidth=50,this.imageHeight=25,this.pdfPrimaryColor="#432818",this.pdfSecondaryColor="#F7EFE2",this.ngZone.runOutsideAngular(()=>super.animationWhenDestroyed())}ngAfterViewInit(){this.ngZone.runOutsideAngular(()=>super.animationWhenCreated())}}return(n=r).\u0275fac=function(o){return new(o||n)(e.Y36(e.R0b))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-sale-list"]],features:[e.qOj],decls:53,vars:46,consts:[[1,"container","px-3"],[3,"title","items"],[1,"p-4","my-5"],[1,"row","gy-4"],[1,"col-12","col-xl-8"],[1,"d-flex","mb-2"],[1,"w-100"],[1,"col-12","col-xl-4"],[1,"d-flex","justify-content-between","justify-content-xl-end","align-items-end","h-100"],[3,"fileName","hasImage","imageUrl","imageWidth","imageHeight","primaryColor","secondaryColor"],[3,"fileName","height","width"],[1,"mx-4",3,"fileName","primaryColor","secondaryColor"],[1,"d-flex",3,"addPageUrl"],[1,"add-item"],["src","assets/icons/plus.svg","width","18px","height","18px"],[1,"text-nowrap","mx-2"],[1,"col-12"],[3,"entrypoint","extraEntrypoint","dataKeys","identifier","hasEditButton","hasDeleteButton","editPageUrl","fieldActionName","deleteModalHeaderText","deleteModalBodyText","deleteModalFooterButtonCloseText","deleteModalFooterButtonExecuteText","errorModalHeaderText","errorModalBodyText","errorModalFooterButtonCloseText"],["editButton",""],["deleteButton",""],["dataError",""],[3,"fileName","loop","height","width"],["emptyData",""],["notLoaded",""],["src","assets/icons/brown-spinner.svg","width","40px","height","40px"],[1,"col-12","col-lg-6"],[1,"d-flex","justify-content-center","justify-content-lg-start","align-items-center"],[1,"d-flex","align-items-center"],[1,"me-4"],[1,"d-flex","justify-content-center","justify-content-lg-end","align-items-center"],[1,"d-none","d-lg-block",3,"preposition"],[1,"me-4","mx-lg-4"],["src","assets/icons/pencil.svg","width","24px","height","24px"],["src","assets/icons/trash.svg","width","24px","height","24px"]],template:function(o,t){1&o&&(e.TgZ(0,"app-view")(1,"div",0),e._UZ(2,"app-title",1),e.TgZ(3,"div",2)(4,"ngx-table")(5,"div",3)(6,"div",4)(7,"div",5)(8,"span",6),e._uU(9,"Fecha inicial"),e.qZA(),e.TgZ(10,"span",6),e._uU(11,"Fecha final"),e.qZA()(),e._UZ(12,"ngx-table-date-input"),e.qZA(),e.TgZ(13,"div",7)(14,"div",8)(15,"div")(16,"ngx-table-pdf-export-button",9),e._UZ(17,"app-lottie",10),e.qZA(),e.TgZ(18,"ngx-table-xls-export-button",11),e._UZ(19,"app-lottie",10),e.qZA()(),e.TgZ(20,"ngx-table-add-button",12)(21,"div",13)(22,"div"),e._UZ(23,"img",14),e.TgZ(24,"span",15),e._uU(25,"A\xf1adir"),e.qZA()()()()()(),e.TgZ(26,"div",16)(27,"ngx-table-data-table",17),e.YNc(28,j,1,0,"ng-template",null,18,e.W1O),e.YNc(30,R,1,0,"ng-template",null,19,e.W1O),e.TgZ(32,"div",20),e._UZ(33,"app-lottie",21),e.qZA(),e.TgZ(34,"div",22),e._UZ(35,"app-lottie",21),e.qZA(),e.TgZ(36,"div",23),e._UZ(37,"img",24),e.qZA()()(),e.TgZ(38,"div",25)(39,"div",26)(40,"div",27)(41,"span",28),e._uU(42,"Filas por p\xe1gina"),e.qZA(),e._UZ(43,"ngx-table-pagination-select"),e.qZA()()(),e.TgZ(44,"div",25)(45,"div",29),e._UZ(46,"ngx-table-info-items",30),e.TgZ(47,"ngx-table-previous-button",31)(48,"span"),e._uU(49,"Anterior"),e.qZA()(),e.TgZ(50,"ngx-table-next-button")(51,"span"),e._uU(52,"Siguiente"),e.qZA()()()()()()()()()),2&o&&(e.xp6(2),e.Q6J("title","Lista de ventas")("items",e.DdM(45,z)),e.xp6(5),e.Udp("gap","20px"),e.xp6(9),e.Q6J("fileName",t.pdfFileName)("hasImage",t.hasImage)("imageUrl",t.imageUrl)("imageWidth",t.imageWidth)("imageHeight",t.imageHeight)("primaryColor",t.pdfPrimaryColor)("secondaryColor",t.pdfSecondaryColor),e.xp6(1),e.Q6J("fileName","file-type-pdf-animated")("height",24)("width",24),e.xp6(1),e.Q6J("fileName",t.xlsxFileName)("primaryColor",t.xlsxPrimaryColor)("secondaryColor",t.xlsxSecondaryColor),e.xp6(1),e.Q6J("fileName","file-type-xls-animated")("height",24)("width",24),e.xp6(1),e.Q6J("addPageUrl",t.addPageUrl),e.xp6(7),e.Q6J("entrypoint",t.entrypoint)("extraEntrypoint",t.extraEntrypoint)("dataKeys",t.keys)("identifier",t.identifier)("hasEditButton",t.hasEditButton)("hasDeleteButton",t.hasDeleteButton)("editPageUrl",t.editPageUrl)("fieldActionName",t.fieldActionName)("deleteModalHeaderText",t.deleteModalHeaderText)("deleteModalBodyText",t.deleteModalBodyText)("deleteModalFooterButtonCloseText",t.deleteModalFooterButtonCloseText)("deleteModalFooterButtonExecuteText",t.deleteModalFooterButtonExecuteText)("errorModalHeaderText",t.errorModalHeaderText)("errorModalBodyText",t.errorModalBodyText)("errorModalFooterButtonCloseText",t.errorModalFooterButtonCloseText),e.xp6(6),e.Q6J("fileName","data-error-animated")("loop",!0)("height",400)("width",400),e.xp6(2),e.Q6J("fileName","no-data-animated")("loop",!0)("height",400)("width",400),e.xp6(11),e.Q6J("preposition",t.preposition))},dependencies:[h.r,f.H,M.e,N.J,J.c,q.i,A.e,I.T,F.P,U.y,w.e,E.g,O.$],styles:[".container[_ngcontent-%COMP%]{font-family:poppins-regular;color:#432818;font-size:14px;transition:.3s all ease-in-out}.container[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{background-color:#fff;border-radius:8px;box-shadow:#919eab4d 0 0 2px,#919eab1f 0 12px 24px -4px}"],changeDetection:0}),r})();var a=l(95),x=l(6306),P=l(4366),T=l(6232),C=l(4716),u=l(2933),m=l(3737),b=l(7639),y=l(28),k=l(3918),Z=l(4344),S=l(8925),Q=l(3989),H=l(6346),B=l(833);const ee=["info"],te=["error"],ne=["productError"];function oe(n,r){if(1&n){const s=e.EpF();e.TgZ(0,"div",31)(1,"span"),e._uU(2,"A\xf1adir venta"),e.qZA(),e.TgZ(3,"button",32),e.NdJ("click",function(){const i=e.CHM(s).$implicit;return e.KtG(i.dismiss())}),e._UZ(4,"img",33),e.qZA()(),e.TgZ(5,"div",34)(6,"span"),e._uU(7,"La venta fue a\xf1adida"),e.qZA()(),e.TgZ(8,"div",35)(9,"button",36),e.NdJ("click",function(){const i=e.CHM(s).$implicit;return e.KtG(i.close())}),e._uU(10,"Cerrar"),e.qZA()()}}function ie(n,r){if(1&n){const s=e.EpF();e.TgZ(0,"div",31)(1,"span"),e._uU(2,"Error"),e.qZA(),e.TgZ(3,"button",32),e.NdJ("click",function(){const i=e.CHM(s).$implicit;return e.KtG(i.dismiss())}),e._UZ(4,"img",33),e.qZA()(),e.TgZ(5,"div",34)(6,"span"),e._uU(7,"Ocurri\xf3 un error, int\xe9ntelo de nuevo"),e.qZA()(),e.TgZ(8,"div",35)(9,"button",36),e.NdJ("click",function(){const i=e.CHM(s).$implicit;return e.KtG(i.close())}),e._uU(10,"Cerrar"),e.qZA()()}}function ae(n,r){if(1&n){const s=e.EpF();e.TgZ(0,"div",31)(1,"span"),e._uU(2,"Error"),e.qZA(),e.TgZ(3,"button",32),e.NdJ("click",function(){const i=e.CHM(s).$implicit;return e.KtG(i.dismiss())}),e._UZ(4,"img",33),e.qZA()(),e.TgZ(5,"div",34)(6,"span"),e._uU(7,"Introducir un producto existente"),e.qZA()(),e.TgZ(8,"div",35)(9,"button",36),e.NdJ("click",function(){const i=e.CHM(s).$implicit;return e.KtG(i.close())}),e._uU(10,"Cerrar"),e.qZA()()}}const se=function(){return["Ventas","A\xf1adir venta"]},G=function(n){return{"d-none":n}};let re=(()=>{var n;class r extends g.H{constructor(o,t,i,d,_,v){super(),this.dataService=o,this.formService=t,this.unsubscriberService=i,this.modalService=d,this.cdr=_,this.ngZone=v,this.itemId=0,this.isLoading=!1,this.repeatedStates={LOADING:"Cargando ...",ERROR:"Ocurri\xf3 un error",NODATA:"Sin resultados"},this.saleProductStateMessages={INIT:"Introducir producto",...this.repeatedStates},this.saleQuantityStateMessages={INIT:"Introducir cantidad",...this.repeatedStates},this.saleAmountStateMessages={INIT:"Introducir monto",...this.repeatedStates},this.saleTypeStateMessages={INIT:"Seleccionar tipo",...this.repeatedStates},this.saleDateStateMessages=this.repeatedStates,this.saleDescriptionStateMessages={INIT:"Introducir descripci\xf3n",...this.repeatedStates},this.saleImageStateMessages=this.repeatedStates,this.configList={saleProductConfig:{state:"INIT"},saleQuantityConfig:{state:"INIT"},saleAmountConfig:{state:"INIT"},saleTypeConfig:{entrypoint:"/ventaTipos",state:"INIT"},saleDateConfig:{state:"INIT"},saleImageConfig:{state:"INIT"},saleDescriptionConfig:{state:"INIT"}},this.maxDate=new Date,this.dataList=[],this.filteredDataList=[],this.ngZone.runOutsideAngular(()=>super.animationWhenDestroyed()),this.saleForm=new a.cw({id:new a.NI(this.itemId,{nonNullable:!0}),producto:new a.cw({id:new a.NI(0,{nonNullable:!0,validators:[this.formService.handleInvalidInput()]}),nombre:new a.NI("",{nonNullable:!0,validators:[this.formService.handleInvalidInput()]})}),cantidad:new a.NI("",{nonNullable:!0,validators:[a.kI.required,a.kI.pattern(/^\d+$/)]}),monto:new a.NI("",{nonNullable:!0,validators:[a.kI.required,a.kI.pattern(/^\d+(\.\d{1,2})?$/)]}),ventaTipo:new a.cw({id:new a.NI(0,{nonNullable:!0,validators:[this.formService.handleInvalidInput()]})}),fechaVenta:new a.NI((0,p.p6)(this.maxDate,"yyyy-MM-dd","en"),{nonNullable:!0,validators:[this.formService.handleInvalidInput()]}),imagen:new a.NI(null),descripcion:new a.NI("")})}ngOnInit(){this.onLoad()}ngAfterViewInit(){this.ngZone.runOutsideAngular(()=>super.animationWhenCreated())}onLoad(){this.saleTypes$=this.formService.createObservableForSelect(this.configList.saleTypeConfig,!0,this.cdr),this.dataService.loadDataFromEndPoint("/productos").pipe(this.unsubscriberService.takeUntilDestroy,(0,x.K)(()=>P.C)).subscribe(o=>o.forEach(t=>this.dataList.push(t)))}onSubmit(){if(!this.isFormInvalid()){if(!this.dataList.find(i=>i.nombre==this.saleForm.value.producto.nombre))return void this.modalService.open(this.productError,{centered:!0,modalDialogClass:"error"});this.isLoading=!0,this.formService.capitalizeFormControl(this.saleForm);const t=new FormData;t.set("id",this.saleForm.value.id.toString()),t.set("productoId",this.saleForm.value.producto.id.toString()),t.set("cantidad",this.saleForm.value.cantidad),t.set("monto",this.saleForm.value.monto),t.set("ventaTipoId",this.saleForm.value.ventaTipo.id.toString()),t.set("fechaVenta",this.saleForm.value.fechaVenta),t.set("imagen",this.saleForm.value.imagen?this.saleForm.value.imagen:new File([""],"")),t.set("descripcion",this.saleForm.value.descripcion),this.dataService.addDataFromEndPoint("/ventas/fileSystem",t).pipe(this.unsubscriberService.takeUntilDestroy,(0,x.K)(()=>(this.modalService.open(this.error,{centered:!0,modalDialogClass:"error"}),T.E)),(0,C.x)(()=>this.isLoading=!1)).subscribe(()=>{this.modalService.open(this.info,{centered:!0,modalDialogClass:"success"}),this.saleForm.reset()})}}isFormInvalid(){return this.formService.isFormInvalid(this.saleForm)}onInputChange(o){this.saleForm.patchValue({monto:""}),this.filteredDataList=[],this.dataList.forEach(t=>t.nombre.toLocaleLowerCase().match(o)?.length?this.filteredDataList.push(t.nombre):"")}onDataChange(o){const t=this.dataList.find(i=>i.nombre==o);t&&(this.saleForm.patchValue({producto:{id:t.id},monto:t.precio}),this.saleForm.controls.monto.markAsDirty())}}return(n=r).\u0275fac=function(o){return new(o||n)(e.Y36(b.R),e.Y36(u.F),e.Y36(m.$),e.Y36(y.FF),e.Y36(e.sBO),e.Y36(e.R0b))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-add-sale"]],viewQuery:function(o,t){if(1&o&&(e.Gf(ee,5),e.Gf(te,5),e.Gf(ne,5)),2&o){let i;e.iGM(i=e.CRH())&&(t.info=i.first),e.iGM(i=e.CRH())&&(t.error=i.first),e.iGM(i=e.CRH())&&(t.productError=i.first)}},features:[e._Bn([u.F,m.$]),e.qOj],decls:45,vars:44,consts:[[1,"container","px-3"],[3,"title","items"],[1,"p-4","my-5"],["autocomplete","off",3,"formGroup","ngSubmit"],[1,"row","gy-4"],["formGroupName","producto",1,"col-12","col-md-6","col-lg-4"],["formControlName","nombre",3,"labelText","currentStatus","statusMessages","dataList","controlChange","dataChange"],[1,"col-12","col-md-6","col-lg-4"],["formControlName","cantidad",3,"labelText","inputType","currentStatus","statusMessages"],["formControlName","monto",3,"labelText","inputType","currentStatus","statusMessages","keypress"],["formGroupName","ventaTipo",1,"col-12","col-md-6","col-lg-4"],["formControlName","id",3,"labelText","dataList","dataKey","currentStatus","statusMessages"],["formControlName","fechaVenta",3,"labelText","max","currentStatus","statusMessages"],[1,"col-12"],["formControlName","descripcion",3,"labelText","rows","currentStatus","statusMessages"],["formControlName","imagen",3,"labelText","currentStatus","statusMessages"],[1,"d-flex","flex-column","justify-content-center","align-items-center","py-4"],["xmlns","http://www.w3.org/2000/svg","width","34","height","34","viewBox","0 0 24 24","stroke-width","2","fill","none","stroke-linecap","round","stroke-linejoin","round"],["stroke","none","d","M0 0h24v24H0z","fill","none"],["d","M7 18a4.6 4.4 0 0 1 0 -9a5 4.5 0 0 1 11 2h1a3.5 3.5 0 0 1 0 7h-1"],["d","M9 15l3 -3l3 3"],["d","M12 12l0 9"],[1,"mt-1"],[1,"d-flex","justify-content-end"],["id","return-button","routerLink","/admin/sales/list",1,"text-center"],["type","submit","id","send-button",1,"text-white","ms-4",3,"disabled"],[3,"ngClass"],["src","assets/icons/white-spinner.svg",3,"ngClass"],["info",""],["error",""],["productError",""],[1,"modal-header"],[3,"click"],["src","assets/icons/x.svg","width","24px","height","24px"],[1,"modal-body"],[1,"modal-footer"],["type","button",3,"click"]],template:function(o,t){1&o&&(e.TgZ(0,"app-view")(1,"div",0),e._UZ(2,"app-title",1),e.TgZ(3,"div",2)(4,"form",3),e.NdJ("ngSubmit",function(){return t.onSubmit()}),e.TgZ(5,"div",4)(6,"div",5)(7,"ngx-table-input-list-control",6),e.NdJ("controlChange",function(d){return t.onInputChange(d)})("dataChange",function(d){return t.onDataChange(d)}),e.qZA()(),e.TgZ(8,"div",7),e._UZ(9,"ngx-table-input-control",8),e.qZA(),e.TgZ(10,"div",7)(11,"ngx-table-input-control",9),e.NdJ("keypress",function(d){return t.formService.onKeyPress(d)}),e.qZA()(),e.TgZ(12,"div",10),e._UZ(13,"ngx-table-select-control",11),e.ALo(14,"async"),e.qZA(),e.TgZ(15,"div",7),e._UZ(16,"ngx-table-date-control",12),e.ALo(17,"date"),e.qZA(),e.TgZ(18,"div",13),e._UZ(19,"ngx-table-textarea-control",14),e.qZA(),e.TgZ(20,"div",13)(21,"ngx-table-file-upload-control",15)(22,"div",16),e.O4$(),e.TgZ(23,"svg",17),e._UZ(24,"path",18)(25,"path",19)(26,"path",20)(27,"path",21),e.qZA(),e.kcU(),e.TgZ(28,"span",22),e._uU(29,"Seleccione un archivo de su dispositivo"),e.qZA()()()(),e.TgZ(30,"div",13)(31,"div",23)(32,"a",24)(33,"span"),e._uU(34,"Volver"),e.qZA()(),e.TgZ(35,"button",25)(36,"span",26),e._uU(37,"Enviar"),e.qZA(),e._UZ(38,"img",27),e.qZA()()()()()()()(),e.YNc(39,oe,11,0,"ng-template",null,28,e.W1O),e.YNc(41,ie,11,0,"ng-template",null,29,e.W1O),e.YNc(43,ae,11,0,"ng-template",null,30,e.W1O)),2&o&&(e.xp6(2),e.Q6J("title","A\xf1adir venta")("items",e.DdM(39,se)),e.xp6(2),e.Q6J("formGroup",t.saleForm),e.xp6(3),e.Q6J("labelText","Nombre del producto")("currentStatus",t.configList.saleProductConfig.state)("statusMessages",t.saleProductStateMessages)("dataList",t.filteredDataList),e.xp6(2),e.Q6J("labelText","Cantidad")("inputType","number")("currentStatus",t.configList.saleQuantityConfig.state)("statusMessages",t.saleQuantityStateMessages),e.xp6(2),e.Q6J("labelText","Monto")("inputType","number")("currentStatus",t.configList.saleAmountConfig.state)("statusMessages",t.saleAmountStateMessages),e.xp6(2),e.Q6J("labelText","Tipo de venta")("dataList",e.lcZ(14,34,t.saleTypes$))("dataKey","nombre")("currentStatus",t.configList.saleTypeConfig.state)("statusMessages",t.saleTypeStateMessages),e.xp6(3),e.Q6J("labelText","Fecha")("max",e.xi3(17,36,t.maxDate,"yyyy-MM-dd"))("currentStatus",t.configList.saleDateConfig.state)("statusMessages",t.saleDateStateMessages),e.xp6(3),e.Q6J("labelText","Descripci\xf3n (Opcional)")("rows",5)("currentStatus",t.configList.saleDescriptionConfig.state)("statusMessages",t.saleDescriptionStateMessages),e.xp6(2),e.Q6J("labelText","Imagen (Opcional)")("currentStatus",t.configList.saleImageConfig.state)("statusMessages",t.saleImageStateMessages),e.xp6(14),e.Q6J("disabled",t.isFormInvalid()||t.isLoading),e.xp6(1),e.Q6J("ngClass",e.VKq(40,G,t.isLoading)),e.xp6(2),e.Q6J("ngClass",e.VKq(42,G,!t.isLoading)))},dependencies:[p.mk,c.rH,a._Y,a.JJ,a.JL,a.sg,a.u,a.x0,h.r,f.H,k.A,Z.i,S.w,Q.e,H.i,B.Z,p.Ov,p.uU],styles:[".container[_ngcontent-%COMP%]{font-family:poppins-regular;color:#432818;font-size:14px;transition:.3s all ease-in-out}.container[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{background-color:#fff;border-radius:8px;box-shadow:#919eab4d 0 0 2px,#919eab1f 0 12px 24px -4px}.container[_ngcontent-%COMP%]   #return-button[_ngcontent-%COMP%]{font-size:14px;width:110px;border-radius:8px;border:1px solid #b08968!important;padding:6px 12px;background-color:#fff!important;font-weight:400;color:#b08968!important;text-decoration:none}.container[_ngcontent-%COMP%]   #send-button[_ngcontent-%COMP%]{font-size:14px;width:110px;border-radius:8px;border:1px solid #432818;padding:6px 12px;background-color:#432818;font-weight:400}.container[_ngcontent-%COMP%]   #send-button[_ngcontent-%COMP%]:disabled{background-color:#695346;border-color:#695346;cursor:not-allowed}"],changeDetection:0}),r})();var le=l(9278);const de=["info"],pe=["error"],ce=["productError"];function ue(n,r){if(1&n){const s=e.EpF();e.TgZ(0,"div",31)(1,"span"),e._uU(2,"Editar venta"),e.qZA(),e.TgZ(3,"button",32),e.NdJ("click",function(){const i=e.CHM(s).$implicit;return e.KtG(i.dismiss())}),e._UZ(4,"img",33),e.qZA()(),e.TgZ(5,"div",34)(6,"span"),e._uU(7,"La venta fue editada"),e.qZA()(),e.TgZ(8,"div",35)(9,"button",36),e.NdJ("click",function(){const i=e.CHM(s).$implicit;return e.KtG(i.close())}),e._uU(10,"Cerrar"),e.qZA()()}}function me(n,r){if(1&n){const s=e.EpF();e.TgZ(0,"div",31)(1,"span"),e._uU(2,"Error"),e.qZA(),e.TgZ(3,"button",32),e.NdJ("click",function(){const i=e.CHM(s).$implicit;return e.KtG(i.dismiss())}),e._UZ(4,"img",33),e.qZA()(),e.TgZ(5,"div",34)(6,"span"),e._uU(7,"Ocurri\xf3 un error, int\xe9ntelo de nuevo"),e.qZA()(),e.TgZ(8,"div",35)(9,"button",36),e.NdJ("click",function(){const i=e.CHM(s).$implicit;return e.KtG(i.close())}),e._uU(10,"Cerrar"),e.qZA()()}}function ge(n,r){if(1&n){const s=e.EpF();e.TgZ(0,"div",31)(1,"span"),e._uU(2,"Error"),e.qZA(),e.TgZ(3,"button",32),e.NdJ("click",function(){const i=e.CHM(s).$implicit;return e.KtG(i.dismiss())}),e._UZ(4,"img",33),e.qZA()(),e.TgZ(5,"div",34)(6,"span"),e._uU(7,"Introducir un producto existente"),e.qZA()(),e.TgZ(8,"div",35)(9,"button",36),e.NdJ("click",function(){const i=e.CHM(s).$implicit;return e.KtG(i.close())}),e._uU(10,"Cerrar"),e.qZA()()}}const he=function(){return["Ventas","Editar venta"]},Y=function(n){return{"d-none":n}};let fe=(()=>{var n;class r extends g.H{constructor(o,t,i,d,_,v,D){super(),this.route=o,this.dataService=t,this.formService=i,this.unsubscriberService=d,this.modalService=_,this.cdr=v,this.ngZone=D,this.itemId=0,this.isLoading=!1,this.repeatedStates={LOADING:"Cargando ...",ERROR:"Ocurri\xf3 un error",NODATA:"Sin resultados"},this.saleProductStateMessages={INIT:"Introducir producto",...this.repeatedStates},this.saleQuantityStateMessages={INIT:"Introducir cantidad",...this.repeatedStates},this.saleAmountStateMessages={INIT:"Introducir monto",...this.repeatedStates},this.saleTypeStateMessages={INIT:"Seleccionar tipo",...this.repeatedStates},this.saleDateStateMessages=this.repeatedStates,this.saleDescriptionStateMessages={INIT:"Introducir descripci\xf3n",...this.repeatedStates},this.saleImageStateMessages=this.repeatedStates,this.configList={saleProductConfig:{state:"INIT"},saleQuantityConfig:{state:"INIT"},saleAmountConfig:{state:"INIT"},saleTypeConfig:{entrypoint:"/ventaTipos",state:"INIT"},saleDateConfig:{state:"INIT"},saleImageConfig:{state:"INIT"},saleDescriptionConfig:{state:"INIT"}},this.maxDate=new Date,this.dataList=[],this.filteredDataList=[],this.ngZone.runOutsideAngular(()=>super.animationWhenDestroyed()),this.saleForm=new a.cw({id:new a.NI(this.itemId,{nonNullable:!0}),producto:new a.cw({id:new a.NI(0,{nonNullable:!0}),nombre:new a.NI("",{nonNullable:!0,validators:[this.formService.handleInvalidInput()]})}),cantidad:new a.NI("",{nonNullable:!0,validators:[a.kI.required,a.kI.pattern(/^\d+$/)]}),monto:new a.NI("",{nonNullable:!0,validators:[a.kI.required,a.kI.pattern(/^\d+(\.\d{1,2})?$/)]}),ventaTipo:new a.cw({id:new a.NI(0,{nonNullable:!0,validators:[this.formService.handleInvalidInput()]})}),fechaVenta:new a.NI("",{nonNullable:!0,validators:[this.formService.handleInvalidInput()]}),imagen:new a.NI(null),descripcion:new a.NI("")})}ngOnInit(){this.route.params.pipe(this.unsubscriberService.takeUntilDestroy).subscribe(o=>{this.itemId=o.itemId,this.onLoad()})}ngAfterViewInit(){this.ngZone.runOutsideAngular(()=>super.animationWhenCreated())}onLoad(){this.saleTypes$=this.formService.createObservableForSelect(this.configList.saleTypeConfig,!0,this.cdr),(0,le.$)(this.formService.loadItem(`/ventas/id/${this.itemId}`,this.configList,this.cdr),this.dataService.loadDataFromEndPoint("/productos")).pipe(this.unsubscriberService.takeUntilDestroy,(0,x.K)(()=>P.C)).subscribe(o=>{const t=o[0];o[1].forEach(d=>this.dataList.push(d));const i=this.dataList.find(d=>d.nombre==t.producto.nombre)?.nombre;this.saleForm.patchValue({id:t.id,producto:{id:t.producto.id,nombre:i},cantidad:t.cantidad,monto:t.monto,ventaTipo:{id:t.ventaTipo.id},fechaVenta:t.fechaVenta,imagen:t.imagen?new File([""],t.imagen):null,descripcion:t.descripcion})})}onSubmit(){if(!this.isFormInvalid()){if(!this.dataList.find(i=>i.nombre==this.saleForm.value.producto.nombre))return void this.modalService.open(this.productError,{centered:!0,modalDialogClass:"error"});this.isLoading=!0,this.formService.capitalizeFormControl(this.saleForm);const t=new FormData;t.set("id",this.saleForm.value.id.toString()),t.set("productoId",this.saleForm.value.producto.id.toString()),t.set("cantidad",this.saleForm.value.cantidad),t.set("monto",this.saleForm.value.monto),t.set("ventaTipoId",this.saleForm.value.ventaTipo.id.toString()),t.set("fechaVenta",this.saleForm.value.fechaVenta),t.set("imagen",this.saleForm.value.imagen?this.saleForm.value.imagen:new File([""],"")),t.set("descripcion",this.saleForm.value.descripcion),this.dataService.updateDataFromEndPoint("/ventas/fileSystem",t).pipe(this.unsubscriberService.takeUntilDestroy,(0,x.K)(()=>(this.modalService.open(this.error,{centered:!0,modalDialogClass:"error"}),T.E)),(0,C.x)(()=>this.isLoading=!1)).subscribe(()=>{this.modalService.open(this.info,{centered:!0,modalDialogClass:"success"})})}}isFormInvalid(){return this.formService.isFormInvalid(this.saleForm)}onInputChange(o){this.saleForm.patchValue({monto:""}),this.filteredDataList=[],this.dataList.forEach(t=>t.nombre.toLocaleLowerCase().match(o)?.length?this.filteredDataList.push(t.nombre):"")}onDataChange(o){const t=this.dataList.find(i=>i.nombre==o);t&&(this.saleForm.patchValue({producto:{id:t.id},monto:t.precio}),this.saleForm.controls.monto.markAsDirty())}}return(n=r).\u0275fac=function(o){return new(o||n)(e.Y36(c.gz),e.Y36(b.R),e.Y36(u.F),e.Y36(m.$),e.Y36(y.FF),e.Y36(e.sBO),e.Y36(e.R0b))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-edit-sale"]],viewQuery:function(o,t){if(1&o&&(e.Gf(de,5),e.Gf(pe,5),e.Gf(ce,5)),2&o){let i;e.iGM(i=e.CRH())&&(t.info=i.first),e.iGM(i=e.CRH())&&(t.error=i.first),e.iGM(i=e.CRH())&&(t.productError=i.first)}},features:[e._Bn([u.F,m.$]),e.qOj],decls:45,vars:44,consts:[[1,"container","px-3"],[3,"title","items"],[1,"p-4","my-5"],["autocomplete","off",3,"formGroup","ngSubmit"],[1,"row","gy-4"],["formGroupName","producto",1,"col-12","col-md-6","col-lg-4"],["formControlName","nombre",3,"labelText","currentStatus","statusMessages","dataList","controlChange","dataChange"],[1,"col-12","col-md-6","col-lg-4"],["formControlName","cantidad",3,"labelText","inputType","currentStatus","statusMessages"],["formControlName","monto",3,"labelText","inputType","currentStatus","statusMessages","keypress"],["formGroupName","ventaTipo",1,"col-12","col-md-6","col-lg-4"],["formControlName","id",3,"labelText","dataList","dataKey","currentStatus","statusMessages"],["formControlName","fechaVenta",3,"labelText","max","currentStatus","statusMessages"],[1,"col-12"],["formControlName","descripcion",3,"labelText","rows","currentStatus","statusMessages"],["formControlName","imagen",3,"labelText","currentStatus","statusMessages"],[1,"d-flex","flex-column","justify-content-center","align-items-center","py-4"],["xmlns","http://www.w3.org/2000/svg","width","34","height","34","viewBox","0 0 24 24","stroke-width","2","fill","none","stroke-linecap","round","stroke-linejoin","round"],["stroke","none","d","M0 0h24v24H0z","fill","none"],["d","M7 18a4.6 4.4 0 0 1 0 -9a5 4.5 0 0 1 11 2h1a3.5 3.5 0 0 1 0 7h-1"],["d","M9 15l3 -3l3 3"],["d","M12 12l0 9"],[1,"mt-1"],[1,"d-flex","justify-content-end"],["id","return-button","routerLink","/admin/sales/list",1,"text-center"],["type","submit","id","send-button",1,"text-white","ms-4",3,"disabled"],[3,"ngClass"],["src","assets/icons/white-spinner.svg",3,"ngClass"],["info",""],["error",""],["productError",""],[1,"modal-header"],[3,"click"],["src","assets/icons/x.svg","width","24px","height","24px"],[1,"modal-body"],[1,"modal-footer"],["type","button",3,"click"]],template:function(o,t){1&o&&(e.TgZ(0,"app-view")(1,"div",0),e._UZ(2,"app-title",1),e.TgZ(3,"div",2)(4,"form",3),e.NdJ("ngSubmit",function(){return t.onSubmit()}),e.TgZ(5,"div",4)(6,"div",5)(7,"ngx-table-input-list-control",6),e.NdJ("controlChange",function(d){return t.onInputChange(d)})("dataChange",function(d){return t.onDataChange(d)}),e.qZA()(),e.TgZ(8,"div",7),e._UZ(9,"ngx-table-input-control",8),e.qZA(),e.TgZ(10,"div",7)(11,"ngx-table-input-control",9),e.NdJ("keypress",function(d){return t.formService.onKeyPress(d)}),e.qZA()(),e.TgZ(12,"div",10),e._UZ(13,"ngx-table-select-control",11),e.ALo(14,"async"),e.qZA(),e.TgZ(15,"div",7),e._UZ(16,"ngx-table-date-control",12),e.ALo(17,"date"),e.qZA(),e.TgZ(18,"div",13),e._UZ(19,"ngx-table-textarea-control",14),e.qZA(),e.TgZ(20,"div",13)(21,"ngx-table-file-upload-control",15)(22,"div",16),e.O4$(),e.TgZ(23,"svg",17),e._UZ(24,"path",18)(25,"path",19)(26,"path",20)(27,"path",21),e.qZA(),e.kcU(),e.TgZ(28,"span",22),e._uU(29,"Seleccione un archivo de su dispositivo"),e.qZA()()()(),e.TgZ(30,"div",13)(31,"div",23)(32,"a",24)(33,"span"),e._uU(34,"Volver"),e.qZA()(),e.TgZ(35,"button",25)(36,"span",26),e._uU(37,"Enviar"),e.qZA(),e._UZ(38,"img",27),e.qZA()()()()()()()(),e.YNc(39,ue,11,0,"ng-template",null,28,e.W1O),e.YNc(41,me,11,0,"ng-template",null,29,e.W1O),e.YNc(43,ge,11,0,"ng-template",null,30,e.W1O)),2&o&&(e.xp6(2),e.Q6J("title","Editar venta")("items",e.DdM(39,he)),e.xp6(2),e.Q6J("formGroup",t.saleForm),e.xp6(3),e.Q6J("labelText","Nombre del producto")("currentStatus",t.configList.saleProductConfig.state)("statusMessages",t.saleProductStateMessages)("dataList",t.filteredDataList),e.xp6(2),e.Q6J("labelText","Cantidad")("inputType","number")("currentStatus",t.configList.saleQuantityConfig.state)("statusMessages",t.saleQuantityStateMessages),e.xp6(2),e.Q6J("labelText","Monto")("inputType","number")("currentStatus",t.configList.saleAmountConfig.state)("statusMessages",t.saleAmountStateMessages),e.xp6(2),e.Q6J("labelText","Tipo de venta")("dataList",e.lcZ(14,34,t.saleTypes$))("dataKey","nombre")("currentStatus",t.configList.saleTypeConfig.state)("statusMessages",t.saleTypeStateMessages),e.xp6(3),e.Q6J("labelText","Fecha")("max",e.xi3(17,36,t.maxDate,"yyyy-MM-dd"))("currentStatus",t.configList.saleDateConfig.state)("statusMessages",t.saleDateStateMessages),e.xp6(3),e.Q6J("labelText","Descripci\xf3n (Opcional)")("rows",5)("currentStatus",t.configList.saleDescriptionConfig.state)("statusMessages",t.saleDescriptionStateMessages),e.xp6(2),e.Q6J("labelText","Imagen (Opcional)")("currentStatus",t.configList.saleImageConfig.state)("statusMessages",t.saleImageStateMessages),e.xp6(14),e.Q6J("disabled",t.isFormInvalid()||t.isLoading),e.xp6(1),e.Q6J("ngClass",e.VKq(40,Y,t.isLoading)),e.xp6(2),e.Q6J("ngClass",e.VKq(42,Y,!t.isLoading)))},dependencies:[p.mk,c.rH,a._Y,a.JJ,a.JL,a.sg,a.u,a.x0,h.r,f.H,k.A,Z.i,S.w,Q.e,H.i,B.Z,p.Ov,p.uU],styles:[".container[_ngcontent-%COMP%]{font-family:poppins-regular;color:#432818;font-size:14px;transition:.3s all ease-in-out}.container[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{background-color:#fff;border-radius:8px;box-shadow:#919eab4d 0 0 2px,#919eab1f 0 12px 24px -4px}.container[_ngcontent-%COMP%]   #return-button[_ngcontent-%COMP%]{font-size:14px;width:110px;border-radius:8px;border:1px solid #b08968!important;padding:6px 12px;background-color:#fff!important;font-weight:400;color:#b08968!important;text-decoration:none}.container[_ngcontent-%COMP%]   #send-button[_ngcontent-%COMP%]{font-size:14px;width:110px;border-radius:8px;border:1px solid #432818;padding:6px 12px;background-color:#432818;font-weight:400}.container[_ngcontent-%COMP%]   #send-button[_ngcontent-%COMP%]:disabled{background-color:#695346;border-color:#695346;cursor:not-allowed}"],changeDetection:0}),r})();var _e=l(4356);function xe(n,r){1&n&&e._UZ(0,"img",33)}function ve(n,r){1&n&&e._UZ(0,"img",34)}const Te=function(){return["Ventas","Tipo de ventas"]},be=["info"],ye=["error"];function Ze(n,r){if(1&n){const s=e.EpF();e.TgZ(0,"div",16)(1,"span"),e._uU(2,"A\xf1adir tipo de venta"),e.qZA(),e.TgZ(3,"button",17),e.NdJ("click",function(){const i=e.CHM(s).$implicit;return e.KtG(i.dismiss())}),e._UZ(4,"img",18),e.qZA()(),e.TgZ(5,"div",19)(6,"span"),e._uU(7,"El tipo de venta fue a\xf1adido"),e.qZA()(),e.TgZ(8,"div",20)(9,"button",21),e.NdJ("click",function(){const i=e.CHM(s).$implicit;return e.KtG(i.close())}),e._uU(10,"Cerrar"),e.qZA()()}}function Se(n,r){if(1&n){const s=e.EpF();e.TgZ(0,"div",16)(1,"span"),e._uU(2,"Error"),e.qZA(),e.TgZ(3,"button",17),e.NdJ("click",function(){const i=e.CHM(s).$implicit;return e.KtG(i.dismiss())}),e._UZ(4,"img",18),e.qZA()(),e.TgZ(5,"div",19)(6,"span"),e._uU(7,"Ocurri\xf3 un error, int\xe9ntelo de nuevo"),e.qZA()(),e.TgZ(8,"div",20)(9,"button",21),e.NdJ("click",function(){const i=e.CHM(s).$implicit;return e.KtG(i.close())}),e._uU(10,"Cerrar"),e.qZA()()}}const Me=function(){return["Ventas","A\xf1adir tipo de venta"]},$=function(n){return{"d-none":n}},Ae=["info"],Ie=["error"];function Fe(n,r){if(1&n){const s=e.EpF();e.TgZ(0,"div",16)(1,"span"),e._uU(2,"Editar tipo de venta"),e.qZA(),e.TgZ(3,"button",17),e.NdJ("click",function(){const i=e.CHM(s).$implicit;return e.KtG(i.dismiss())}),e._UZ(4,"img",18),e.qZA()(),e.TgZ(5,"div",19)(6,"span"),e._uU(7,"El tipo de venta fue editado"),e.qZA()(),e.TgZ(8,"div",20)(9,"button",21),e.NdJ("click",function(){const i=e.CHM(s).$implicit;return e.KtG(i.close())}),e._uU(10,"Cerrar"),e.qZA()()}}function Ue(n,r){if(1&n){const s=e.EpF();e.TgZ(0,"div",16)(1,"span"),e._uU(2,"Error"),e.qZA(),e.TgZ(3,"button",17),e.NdJ("click",function(){const i=e.CHM(s).$implicit;return e.KtG(i.dismiss())}),e._UZ(4,"img",18),e.qZA()(),e.TgZ(5,"div",19)(6,"span"),e._uU(7,"Ocurri\xf3 un error, int\xe9ntelo de nuevo"),e.qZA()(),e.TgZ(8,"div",20)(9,"button",21),e.NdJ("click",function(){const i=e.CHM(s).$implicit;return e.KtG(i.close())}),e._uU(10,"Cerrar"),e.qZA()()}}const we=function(){return["Ventas","Editar tipo de venta"]},K=function(n){return{"d-none":n}};function Oe(n,r){1&n&&e._UZ(0,"img",28)}function De(n,r){1&n&&e._UZ(0,"img",29)}const Le=function(){return["Ventas","Total de ventas"]},Je=[{path:"list",component:X},{path:"add",component:re},{path:"list/edit/:itemId",component:fe},{path:"type",component:(()=>{var n;class r extends g.H{constructor(o){super(),this.ngZone=o,this.limit=10,this.entrypoint="/ventaTipos",this.identifier="id",this.hasEditButton=!0,this.fieldActionName="Acci\xf3n",this.keys=[{property:["id"],type:"TEXT",header:"Id"},{property:["nombre"],type:"TEXT",header:"Nombre"}],this.selectOptions=[10,15,20],this.preposition="de",this.editPageUrl="/admin/sales/type/edit",this.addPageUrl="/admin/sales/type/add",this.deleteModalHeaderText="Borrar tipo de venta",this.deleteModalBodyText="\xbfEst\xe1s seguro que deseas borrar el tipo de venta?",this.deleteModalFooterButtonCloseText="Cerrar",this.deleteModalFooterButtonExecuteText="Borrar",this.errorModalHeaderText="Error",this.errorModalBodyText="Ocurri\xf3 un error, int\xe9ntelo de nuevo",this.errorModalFooterButtonCloseText="Cerrar",this.xlsxFileName="tipos-de-venta",this.xlsxPrimaryColor="#432818",this.xlsxSecondaryColor="#F7EFE2",this.pdfFileName="tipos-de-venta",this.hasImage=!0,this.imageUrl="https://i.imgur.com/5ZrMWpD.jpg",this.imageWidth=50,this.imageHeight=25,this.pdfPrimaryColor="#432818",this.pdfSecondaryColor="#F7EFE2",this.ngZone.runOutsideAngular(()=>super.animationWhenDestroyed())}ngAfterViewInit(){this.ngZone.runOutsideAngular(()=>super.animationWhenCreated())}}return(n=r).\u0275fac=function(o){return new(o||n)(e.Y36(e.R0b))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-sale-type"]],features:[e.qOj],decls:52,vars:43,consts:[[1,"container","px-3"],[3,"title","items"],[1,"p-4","my-5"],[1,"row","gy-4"],[1,"col-12","col-xl-4"],[1,"d-block","mb-2"],[3,"placeholder"],["src","assets/icons/search.svg","width","18px","height","18px",1,"mx-3"],[1,"col","d-none","d-xl-block"],[1,"d-flex","justify-content-between","justify-content-xl-end","align-items-end","h-100"],[3,"fileName","hasImage","imageUrl","imageWidth","imageHeight","primaryColor","secondaryColor"],[3,"fileName","height","width"],[1,"mx-4",3,"fileName","primaryColor","secondaryColor"],[1,"d-flex",3,"addPageUrl"],[1,"add-item"],["src","assets/icons/plus.svg","width","18px","height","18px"],[1,"text-nowrap","mx-2"],[1,"col-12"],[3,"entrypoint","dataKeys","identifier","hasEditButton","editPageUrl","fieldActionName","deleteModalHeaderText","deleteModalBodyText","deleteModalFooterButtonCloseText","deleteModalFooterButtonExecuteText","errorModalHeaderText","errorModalBodyText","errorModalFooterButtonCloseText"],["editButton",""],["deleteButton",""],["dataError",""],[3,"fileName","loop","height","width"],["emptyData",""],["notLoaded",""],["src","assets/icons/brown-spinner.svg","width","40px","height","40px"],[1,"col-12","col-lg-6"],[1,"d-flex","justify-content-center","justify-content-lg-start","align-items-center"],[1,"d-flex","align-items-center"],[1,"me-4"],[1,"d-flex","justify-content-center","justify-content-lg-end","align-items-center"],[1,"d-none","d-lg-block",3,"preposition"],[1,"me-4","mx-lg-4"],["src","assets/icons/pencil.svg","width","24px","height","24px"],["src","assets/icons/trash.svg","width","24px","height","24px"]],template:function(o,t){1&o&&(e.TgZ(0,"app-view")(1,"div",0),e._UZ(2,"app-title",1),e.TgZ(3,"div",2)(4,"ngx-table")(5,"div",3)(6,"div",4)(7,"span",5),e._uU(8,"Buscar por nombre"),e.qZA(),e.TgZ(9,"ngx-table-search-input",6),e._UZ(10,"img",7),e.qZA()(),e._UZ(11,"div",8),e.TgZ(12,"div",4)(13,"div",9)(14,"div")(15,"ngx-table-pdf-export-button",10),e._UZ(16,"app-lottie",11),e.qZA(),e.TgZ(17,"ngx-table-xls-export-button",12),e._UZ(18,"app-lottie",11),e.qZA()(),e.TgZ(19,"ngx-table-add-button",13)(20,"div",14)(21,"div"),e._UZ(22,"img",15),e.TgZ(23,"span",16),e._uU(24,"A\xf1adir"),e.qZA()()()()()(),e.TgZ(25,"div",17)(26,"ngx-table-data-table",18),e.YNc(27,xe,1,0,"ng-template",null,19,e.W1O),e.YNc(29,ve,1,0,"ng-template",null,20,e.W1O),e.TgZ(31,"div",21),e._UZ(32,"app-lottie",22),e.qZA(),e.TgZ(33,"div",23),e._UZ(34,"app-lottie",22),e.qZA(),e.TgZ(35,"div",24),e._UZ(36,"img",25),e.qZA()()(),e.TgZ(37,"div",26)(38,"div",27)(39,"div",28)(40,"span",29),e._uU(41,"Filas por p\xe1gina"),e.qZA(),e._UZ(42,"ngx-table-pagination-select"),e.qZA()()(),e.TgZ(43,"div",26)(44,"div",30),e._UZ(45,"ngx-table-info-items",31),e.TgZ(46,"ngx-table-previous-button",32)(47,"span"),e._uU(48,"Anterior"),e.qZA()(),e.TgZ(49,"ngx-table-next-button")(50,"span"),e._uU(51,"Siguiente"),e.qZA()()()()()()()()()),2&o&&(e.xp6(2),e.Q6J("title","Tipo de ventas")("items",e.DdM(42,Te)),e.xp6(7),e.Q6J("placeholder","Buscar"),e.xp6(6),e.Q6J("fileName",t.pdfFileName)("hasImage",t.hasImage)("imageUrl",t.imageUrl)("imageWidth",t.imageWidth)("imageHeight",t.imageHeight)("primaryColor",t.pdfPrimaryColor)("secondaryColor",t.pdfSecondaryColor),e.xp6(1),e.Q6J("fileName","file-type-pdf-animated")("height",24)("width",24),e.xp6(1),e.Q6J("fileName",t.xlsxFileName)("primaryColor",t.xlsxPrimaryColor)("secondaryColor",t.xlsxSecondaryColor),e.xp6(1),e.Q6J("fileName","file-type-xls-animated")("height",24)("width",24),e.xp6(1),e.Q6J("addPageUrl",t.addPageUrl),e.xp6(7),e.Q6J("entrypoint",t.entrypoint)("dataKeys",t.keys)("identifier",t.identifier)("hasEditButton",t.hasEditButton)("editPageUrl",t.editPageUrl)("fieldActionName",t.fieldActionName)("deleteModalHeaderText",t.deleteModalHeaderText)("deleteModalBodyText",t.deleteModalBodyText)("deleteModalFooterButtonCloseText",t.deleteModalFooterButtonCloseText)("deleteModalFooterButtonExecuteText",t.deleteModalFooterButtonExecuteText)("errorModalHeaderText",t.errorModalHeaderText)("errorModalBodyText",t.errorModalBodyText)("errorModalFooterButtonCloseText",t.errorModalFooterButtonCloseText),e.xp6(6),e.Q6J("fileName","data-error-animated")("loop",!0)("height",400)("width",400),e.xp6(2),e.Q6J("fileName","no-data-animated")("loop",!0)("height",400)("width",400),e.xp6(11),e.Q6J("preposition",t.preposition))},dependencies:[h.r,f.H,M.e,N.J,_e.h,q.i,A.e,I.T,F.P,U.y,w.e,E.g,O.$],styles:[".container[_ngcontent-%COMP%]{font-family:poppins-regular;color:#432818;font-size:14px;transition:.3s all ease-in-out}.container[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{background-color:#fff;border-radius:8px;box-shadow:#919eab4d 0 0 2px,#919eab1f 0 12px 24px -4px}"],changeDetection:0}),r})()},{path:"type/add",component:(()=>{var n;class r extends g.H{constructor(o,t,i,d,_){super(),this.dataService=o,this.formService=t,this.unsubscriberService=i,this.modalService=d,this.ngZone=_,this.itemId=0,this.isLoading=!1,this.repeatedStates={LOADING:"Cargando ...",ERROR:"Ocurri\xf3 un error",NODATA:"Sin resultados"},this.saleNameStateMessages={INIT:"Introducir nombre",...this.repeatedStates},this.saleDescriptionStateMessages={INIT:"Introducir descripci\xf3n",...this.repeatedStates},this.configList={saleNameConfig:{state:"INIT"},saleDescriptionConfig:{state:"INIT"}},this.ngZone.runOutsideAngular(()=>super.animationWhenDestroyed()),this.saleTypeForm=new a.cw({id:new a.NI(this.itemId,{nonNullable:!0}),nombre:new a.NI("",{nonNullable:!0,validators:[this.formService.handleInvalidInput()]}),descripcion:new a.NI("")})}ngAfterViewInit(){this.ngZone.runOutsideAngular(()=>super.animationWhenCreated())}onSubmit(){this.isFormInvalid()||(this.isLoading=!0,this.formService.capitalizeFormControl(this.saleTypeForm),this.dataService.addDataFromEndPoint("/ventaTipos",this.saleTypeForm.value).pipe(this.unsubscriberService.takeUntilDestroy,(0,x.K)(()=>(this.modalService.open(this.error,{centered:!0,modalDialogClass:"error"}),T.E)),(0,C.x)(()=>this.isLoading=!1)).subscribe(()=>{this.modalService.open(this.info,{centered:!0,modalDialogClass:"success"}),this.saleTypeForm.reset()}))}isFormInvalid(){return this.formService.isFormInvalid(this.saleTypeForm)}}return(n=r).\u0275fac=function(o){return new(o||n)(e.Y36(b.R),e.Y36(u.F),e.Y36(m.$),e.Y36(y.FF),e.Y36(e.R0b))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-add-sale-type"]],viewQuery:function(o,t){if(1&o&&(e.Gf(be,5),e.Gf(ye,5)),2&o){let i;e.iGM(i=e.CRH())&&(t.info=i.first),e.iGM(i=e.CRH())&&(t.error=i.first)}},features:[e._Bn([u.F,m.$]),e.qOj],decls:23,vars:18,consts:[[1,"container","px-3"],[3,"title","items"],[1,"p-4","my-5"],["autocomplete","off",3,"formGroup","ngSubmit"],[1,"row","gy-4"],[1,"col-12","col-md-6","col-lg-4"],["formControlName","nombre",3,"labelText","currentStatus","statusMessages"],[1,"col-12"],["formControlName","descripcion",3,"labelText","rows","currentStatus","statusMessages"],[1,"d-flex","justify-content-end"],["id","return-button","routerLink","/admin/sales/type",1,"text-center"],["type","submit","id","send-button",1,"text-white","ms-4",3,"disabled"],[3,"ngClass"],["src","assets/icons/white-spinner.svg",3,"ngClass"],["info",""],["error",""],[1,"modal-header"],[3,"click"],["src","assets/icons/x.svg","width","24px","height","24px"],[1,"modal-body"],[1,"modal-footer"],["type","button",3,"click"]],template:function(o,t){1&o&&(e.TgZ(0,"app-view")(1,"div",0),e._UZ(2,"app-title",1),e.TgZ(3,"div",2)(4,"form",3),e.NdJ("ngSubmit",function(){return t.onSubmit()}),e.TgZ(5,"div",4)(6,"div",5),e._UZ(7,"ngx-table-input-control",6),e.qZA(),e.TgZ(8,"div",7),e._UZ(9,"ngx-table-textarea-control",8),e.qZA(),e.TgZ(10,"div",7)(11,"div",9)(12,"a",10)(13,"span"),e._uU(14,"Volver"),e.qZA()(),e.TgZ(15,"button",11)(16,"span",12),e._uU(17,"Enviar"),e.qZA(),e._UZ(18,"img",13),e.qZA()()()()()()()(),e.YNc(19,Ze,11,0,"ng-template",null,14,e.W1O),e.YNc(21,Se,11,0,"ng-template",null,15,e.W1O)),2&o&&(e.xp6(2),e.Q6J("title","A\xf1adir tipo de venta")("items",e.DdM(13,Me)),e.xp6(2),e.Q6J("formGroup",t.saleTypeForm),e.xp6(3),e.Q6J("labelText","Nombre del tipo de venta")("currentStatus",t.configList.saleNameConfig.state)("statusMessages",t.saleNameStateMessages),e.xp6(2),e.Q6J("labelText","Descripci\xf3n (Opcional)")("rows",5)("currentStatus",t.configList.saleDescriptionConfig.state)("statusMessages",t.saleDescriptionStateMessages),e.xp6(6),e.Q6J("disabled",t.isFormInvalid()||t.isLoading),e.xp6(1),e.Q6J("ngClass",e.VKq(14,$,t.isLoading)),e.xp6(2),e.Q6J("ngClass",e.VKq(16,$,!t.isLoading)))},dependencies:[p.mk,c.rH,a._Y,a.JJ,a.JL,a.sg,a.u,h.r,f.H,Z.i,S.w],styles:[".container[_ngcontent-%COMP%]{font-family:poppins-regular;color:#432818;font-size:14px;transition:.3s all ease-in-out}.container[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{background-color:#fff;border-radius:8px;box-shadow:#919eab4d 0 0 2px,#919eab1f 0 12px 24px -4px}.container[_ngcontent-%COMP%]   #return-button[_ngcontent-%COMP%]{font-size:14px;width:110px;border-radius:8px;border:1px solid #b08968!important;padding:6px 12px;background-color:#fff!important;font-weight:400;color:#b08968!important;text-decoration:none}.container[_ngcontent-%COMP%]   #send-button[_ngcontent-%COMP%]{font-size:14px;width:110px;border-radius:8px;border:1px solid #432818;padding:6px 12px;background-color:#432818;font-weight:400}.container[_ngcontent-%COMP%]   #send-button[_ngcontent-%COMP%]:disabled{background-color:#695346;border-color:#695346;cursor:not-allowed}"],changeDetection:0}),r})()},{path:"type/edit/:itemId",component:(()=>{var n;class r extends g.H{constructor(o,t,i,d,_,v,D){super(),this.route=o,this.dataService=t,this.formService=i,this.unsubscriberService=d,this.modalService=_,this.cdr=v,this.ngZone=D,this.itemId=0,this.isLoading=!1,this.repeatedStates={LOADING:"Cargando ...",ERROR:"Ocurri\xf3 un error",NODATA:"Sin resultados"},this.saleNameStateMessages={INIT:"Introducir nombre",...this.repeatedStates},this.saleDescriptionStateMessages={INIT:"Introducir descripci\xf3n",...this.repeatedStates},this.configList={saleNameConfig:{state:"INIT"},saleDescriptionConfig:{state:"INIT"}},this.ngZone.runOutsideAngular(()=>super.animationWhenDestroyed()),this.saleTypeForm=new a.cw({id:new a.NI(this.itemId,{nonNullable:!0}),nombre:new a.NI("",{nonNullable:!0,validators:[this.formService.handleInvalidInput()]}),descripcion:new a.NI("")})}ngOnInit(){this.route.params.pipe(this.unsubscriberService.takeUntilDestroy).subscribe(o=>{this.itemId=o.itemId,this.onLoad()})}ngAfterViewInit(){this.ngZone.runOutsideAngular(()=>super.animationWhenCreated())}onLoad(){this.formService.loadItem(`/ventaTipos/id/${this.itemId}`,this.configList,this.cdr).subscribe(o=>{this.saleTypeForm.patchValue({id:o.id,nombre:o.nombre,descripcion:o.descripcion})})}onSubmit(){this.isFormInvalid()||(this.isLoading=!0,this.formService.capitalizeFormControl(this.saleTypeForm),this.dataService.updateDataFromEndPoint("/ventaTipos",this.saleTypeForm.value).pipe(this.unsubscriberService.takeUntilDestroy,(0,x.K)(()=>(this.modalService.open(this.error,{centered:!0,modalDialogClass:"error"}),T.E)),(0,C.x)(()=>this.isLoading=!1)).subscribe(()=>{this.modalService.open(this.info,{centered:!0,modalDialogClass:"success"})}))}isFormInvalid(){return this.formService.isFormInvalid(this.saleTypeForm)}}return(n=r).\u0275fac=function(o){return new(o||n)(e.Y36(c.gz),e.Y36(b.R),e.Y36(u.F),e.Y36(m.$),e.Y36(y.FF),e.Y36(e.sBO),e.Y36(e.R0b))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-edit-sale-type"]],viewQuery:function(o,t){if(1&o&&(e.Gf(Ae,5),e.Gf(Ie,5)),2&o){let i;e.iGM(i=e.CRH())&&(t.info=i.first),e.iGM(i=e.CRH())&&(t.error=i.first)}},features:[e._Bn([u.F,m.$]),e.qOj],decls:23,vars:18,consts:[[1,"container","px-3"],[3,"title","items"],[1,"p-4","my-5"],["autocomplete","off",3,"formGroup","ngSubmit"],[1,"row","gy-4"],[1,"col-12","col-md-6","col-lg-4"],["formControlName","nombre",3,"labelText","currentStatus","statusMessages"],[1,"col-12"],["formControlName","descripcion",3,"labelText","rows","currentStatus","statusMessages"],[1,"d-flex","justify-content-end"],["id","return-button","routerLink","/admin/sales/type",1,"text-center"],["type","submit","id","send-button",1,"text-white","ms-4",3,"disabled"],[3,"ngClass"],["src","assets/icons/white-spinner.svg",3,"ngClass"],["info",""],["error",""],[1,"modal-header"],[3,"click"],["src","assets/icons/x.svg","width","24px","height","24px"],[1,"modal-body"],[1,"modal-footer"],["type","button",3,"click"]],template:function(o,t){1&o&&(e.TgZ(0,"app-view")(1,"div",0),e._UZ(2,"app-title",1),e.TgZ(3,"div",2)(4,"form",3),e.NdJ("ngSubmit",function(){return t.onSubmit()}),e.TgZ(5,"div",4)(6,"div",5),e._UZ(7,"ngx-table-input-control",6),e.qZA(),e.TgZ(8,"div",7),e._UZ(9,"ngx-table-textarea-control",8),e.qZA(),e.TgZ(10,"div",7)(11,"div",9)(12,"a",10)(13,"span"),e._uU(14,"Volver"),e.qZA()(),e.TgZ(15,"button",11)(16,"span",12),e._uU(17,"Enviar"),e.qZA(),e._UZ(18,"img",13),e.qZA()()()()()()()(),e.YNc(19,Fe,11,0,"ng-template",null,14,e.W1O),e.YNc(21,Ue,11,0,"ng-template",null,15,e.W1O)),2&o&&(e.xp6(2),e.Q6J("title","Editar tipo de venta")("items",e.DdM(13,we)),e.xp6(2),e.Q6J("formGroup",t.saleTypeForm),e.xp6(3),e.Q6J("labelText","Nombre del tipo de venta")("currentStatus",t.configList.saleNameConfig.state)("statusMessages",t.saleNameStateMessages),e.xp6(2),e.Q6J("labelText","Descripci\xf3n (Opcional)")("rows",5)("currentStatus",t.configList.saleDescriptionConfig.state)("statusMessages",t.saleDescriptionStateMessages),e.xp6(6),e.Q6J("disabled",t.isFormInvalid()||t.isLoading),e.xp6(1),e.Q6J("ngClass",e.VKq(14,K,t.isLoading)),e.xp6(2),e.Q6J("ngClass",e.VKq(16,K,!t.isLoading)))},dependencies:[p.mk,c.rH,a._Y,a.JJ,a.JL,a.sg,a.u,h.r,f.H,Z.i,S.w],styles:[".container[_ngcontent-%COMP%]{font-family:poppins-regular;color:#432818;font-size:14px;transition:.3s all ease-in-out}.container[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{background-color:#fff;border-radius:8px;box-shadow:#919eab4d 0 0 2px,#919eab1f 0 12px 24px -4px}.container[_ngcontent-%COMP%]   #return-button[_ngcontent-%COMP%]{font-size:14px;width:110px;border-radius:8px;border:1px solid #b08968!important;padding:6px 12px;background-color:#fff!important;font-weight:400;color:#b08968!important;text-decoration:none}.container[_ngcontent-%COMP%]   #send-button[_ngcontent-%COMP%]{font-size:14px;width:110px;border-radius:8px;border:1px solid #432818;padding:6px 12px;background-color:#432818;font-weight:400}.container[_ngcontent-%COMP%]   #send-button[_ngcontent-%COMP%]:disabled{background-color:#695346;border-color:#695346;cursor:not-allowed}"],changeDetection:0}),r})()},{path:"total",component:(()=>{var n;class r extends g.H{constructor(o){super(),this.ngZone=o,this.limit=10,this.entrypoint="/ventas/total",this.extraEntrypoint=`/${(0,p.p6)(new Date,"yyyy-MM-dd","en")}/${(0,p.p6)(new Date,"yyyy-MM-dd","en")}`,this.identifier="id",this.keys=[{property:["nombre"],type:"TEXT",header:"Nombre"},{property:["monto"],type:"MONEY",header:"Monto"},{property:["cantidad"],type:"TEXT",header:"Cantidad"},{property:["total"],type:"MONEY",header:"Total"},{property:["tipo"],type:"TEXT",header:"Tipo"}],this.selectOptions=[10,15,20],this.preposition="de",this.xlsxFileName="lista-ventas",this.xlsxPrimaryColor="#432818",this.xlsxSecondaryColor="#F7EFE2",this.pdfFileName="lista-ventas",this.hasImage=!0,this.imageUrl="https://i.imgur.com/5ZrMWpD.jpg",this.imageWidth=50,this.imageHeight=25,this.pdfPrimaryColor="#432818",this.pdfSecondaryColor="#F7EFE2",this.ngZone.runOutsideAngular(()=>super.animationWhenDestroyed())}ngAfterViewInit(){this.ngZone.runOutsideAngular(()=>super.animationWhenCreated())}}return(n=r).\u0275fac=function(o){return new(o||n)(e.Y36(e.R0b))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-total-sales"]],features:[e.qOj],decls:47,vars:34,consts:[[1,"container","px-3"],[3,"title","items"],[1,"p-4","my-5"],[1,"row","gy-4"],[1,"col-12","col-xl-8"],[1,"d-flex","mb-2"],[1,"w-100"],[1,"col-12","col-xl-4"],[1,"d-flex","justify-content-between","justify-content-xl-end","align-items-end","h-100"],[3,"fileName","hasImage","imageUrl","imageWidth","imageHeight","primaryColor","secondaryColor"],[3,"fileName","height","width"],[1,"ms-4",3,"fileName","primaryColor","secondaryColor"],[1,"col-12"],[3,"entrypoint","extraEntrypoint","dataKeys","identifier"],["editButton",""],["deleteButton",""],["dataError",""],[3,"fileName","loop","height","width"],["emptyData",""],["notLoaded",""],["src","assets/icons/brown-spinner.svg","width","40px","height","40px"],[1,"col-12","col-lg-6"],[1,"d-flex","justify-content-center","justify-content-lg-start","align-items-center"],[1,"d-flex","align-items-center"],[1,"me-4"],[1,"d-flex","justify-content-center","justify-content-lg-end","align-items-center"],[1,"d-none","d-lg-block",3,"preposition"],[1,"me-4","mx-lg-4"],["src","assets/icons/pencil.svg","width","24px","height","24px"],["src","assets/icons/trash.svg","width","24px","height","24px"]],template:function(o,t){1&o&&(e.TgZ(0,"app-view")(1,"div",0),e._UZ(2,"app-title",1),e.TgZ(3,"div",2)(4,"ngx-table")(5,"div",3)(6,"div",4)(7,"div",5)(8,"span",6),e._uU(9,"Fecha inicial"),e.qZA(),e.TgZ(10,"span",6),e._uU(11,"Fecha final"),e.qZA()(),e._UZ(12,"ngx-table-date-input"),e.qZA(),e.TgZ(13,"div",7)(14,"div",8)(15,"div")(16,"ngx-table-pdf-export-button",9),e._UZ(17,"app-lottie",10),e.qZA(),e.TgZ(18,"ngx-table-xls-export-button",11),e._UZ(19,"app-lottie",10),e.qZA()()()(),e.TgZ(20,"div",12)(21,"ngx-table-data-table",13),e.YNc(22,Oe,1,0,"ng-template",null,14,e.W1O),e.YNc(24,De,1,0,"ng-template",null,15,e.W1O),e.TgZ(26,"div",16),e._UZ(27,"app-lottie",17),e.qZA(),e.TgZ(28,"div",18),e._UZ(29,"app-lottie",17),e.qZA(),e.TgZ(30,"div",19),e._UZ(31,"img",20),e.qZA()()(),e.TgZ(32,"div",21)(33,"div",22)(34,"div",23)(35,"span",24),e._uU(36,"Filas por p\xe1gina"),e.qZA(),e._UZ(37,"ngx-table-pagination-select"),e.qZA()()(),e.TgZ(38,"div",21)(39,"div",25),e._UZ(40,"ngx-table-info-items",26),e.TgZ(41,"ngx-table-previous-button",27)(42,"span"),e._uU(43,"Anterior"),e.qZA()(),e.TgZ(44,"ngx-table-next-button")(45,"span"),e._uU(46,"Siguiente"),e.qZA()()()()()()()()()),2&o&&(e.xp6(2),e.Q6J("title","Total de ventas")("items",e.DdM(33,Le)),e.xp6(5),e.Udp("gap","20px"),e.xp6(9),e.Q6J("fileName",t.pdfFileName)("hasImage",t.hasImage)("imageUrl",t.imageUrl)("imageWidth",t.imageWidth)("imageHeight",t.imageHeight)("primaryColor",t.pdfPrimaryColor)("secondaryColor",t.pdfSecondaryColor),e.xp6(1),e.Q6J("fileName","file-type-pdf-animated")("height",24)("width",24),e.xp6(1),e.Q6J("fileName",t.xlsxFileName)("primaryColor",t.xlsxPrimaryColor)("secondaryColor",t.xlsxSecondaryColor),e.xp6(1),e.Q6J("fileName","file-type-xls-animated")("height",24)("width",24),e.xp6(2),e.Q6J("entrypoint",t.entrypoint)("extraEntrypoint",t.extraEntrypoint)("dataKeys",t.keys)("identifier",t.identifier),e.xp6(6),e.Q6J("fileName","data-error-animated")("loop",!0)("height",400)("width",400),e.xp6(2),e.Q6J("fileName","no-data-animated")("loop",!0)("height",400)("width",400),e.xp6(11),e.Q6J("preposition",t.preposition))},dependencies:[h.r,f.H,M.e,N.J,J.c,A.e,I.T,F.P,U.y,w.e,E.g,O.$],styles:[".container[_ngcontent-%COMP%]{font-family:poppins-regular;color:#432818;font-size:14px;transition:.3s all ease-in-out}.container[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{background-color:#fff;border-radius:8px;box-shadow:#919eab4d 0 0 2px,#919eab1f 0 12px 24px -4px}"],changeDetection:0}),r})()},{path:"**",redirectTo:"list"}];let qe=(()=>{var n;class r{}return(n=r).\u0275fac=function(o){return new(o||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[c.Bz.forChild(Je),c.Bz]}),r})();const Pe={textType:n=>n?"number"==typeof n?n:n.charAt(0).toUpperCase()+n.slice(1):"",moneyType:n=>n?"s/ "+n:"",dateType:n=>(0,p.p6)(n,"d LLLL y","es-PE"),imageType:n=>n?`<a href="http://localhost:8080/images/ventas/${n}" target="_blank"><img src="../../../../assets/icons/photo.svg" width="24px" height="24px"/></a>`:'<img src="../../../../assets/icons/no-photo.svg" width="24px" height="24px"/>'};let ke=(()=>{var n;class r{}return(n=r).\u0275fac=function(o){return new(o||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({providers:[{provide:W.p,useValue:Pe}],imports:[p.ez,qe,V.m]}),r})()}}]);